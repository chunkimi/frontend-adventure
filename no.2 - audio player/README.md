# Audio Player

## 關鍵重點

- **audio.play() 與 audio.pause() 切換**：透過 `play()` 和 `pause()` 方法，控制音樂的播放與暫停。並且根據當前狀態切換按鈕的圖標，讓播放與暫停按鈕相互轉換。使用 `audio.paused` 屬性來檢查當前播放狀態，以決定接下來要執行的操作。

- **audio.currentTime**：使用 `audio.currentTime` 屬性來設定音樂的當前播放進度，配合進度條讓使用者能夠透過拖曳進度來調整播放位置。當使用者拖動進度條時，需同步更新 `audio.currentTime` 以改變音樂的播放位置。

- **audio.volume 控制**：透過 `audio.volume`，調整音量大小。當音量增減時，設定範圍為 0（靜音）到 1（最大），並動態更新音量圖標，例如當音量為 0 時顯示靜音圖標，當音量為 1 時顯示最大音量圖標。

- **audio.muted 切換**：利用 `audio.muted` 屬性，切換音樂的靜音與取消靜音狀態，並且按下按鈕後更改靜音圖標。當音樂靜音時，音量會被設置為 `0`，用於快速切換靜音與正常音量。

- **播放速度控制**：使用 `audio.playbackRate` 來控制音樂播放的速度，點擊播放速度按鈕時，循環切換 1 倍、1.25 倍、1.5 倍、2 倍、5 倍速度。需要注意，較高的播放速度可能影響音質。

- **audio.duration 與 timeupdate 事件**：通過 `audio.duration` 獲取音樂總時長，並監聽 `timeupdate` 事件，及時更新已播放時間和剩餘時間，顯示在畫面上。當音樂播放進度更新時，該事件會被觸發。

- **快進與倒退功能**：利用 `audio.currentTime`，實現音樂快進 2 秒或倒退 2 秒的功能，讓使用者可以更靈活地控制音樂播放位置。

- **進度條拖曳**：進度條會根據 `audio.currentTime` 實時更新，並允許使用者拖曳或點選來改變播放位置，提供便捷的使用體驗。

- **播放結束事件**：監聽 `audio.addEventListener('ended', callback)` 事件，當音樂播放結束時，觸發相應的回調函數，可以用來自動切換到下一首音樂或重置播放器狀態。

--- 
## 需求
- **時間控制功能**：
   - 透過時間軸拖曳或點選來改變音樂的播放進度。
   - 左邊顯示音樂已播放的時間，右邊顯示音樂剩餘的時間。

-  **播放控制功能**：
   - 暫停 / 播放按鈕相互切換。
   - 快轉和倒轉功能：按下按鈕後音樂分別快轉或倒轉 2 秒。
   
-  **音量控制功能**：
   - 音量增加與音量減少按鈕。
   - 靜音 / 取消靜音按鈕相互切換。

-  **播放倍速控制功能**：
   - 可循環的播放速度控制，循環速度為 1 倍、1.25 倍、1.5 倍、2 倍、5 倍。

--- 

##  使用 `new Audio()`

在這個案例中，使用 `new Audio()` 是為了建立一個新的 `HTMLAudioElement` 實例，並將音樂檔案載入其中。這樣的做法有幾個主要原因：

1. **建立新的音頻實例**：每次使用 `new Audio()`，都會創建一個新的音頻物件，這個物件能夠播放指定的音檔。如果你不使用 `new`，則無法動態創建這樣的音頻實例。

2. **動態載入音樂檔案**：當你傳入一個音檔路徑（如 `"https://spmdl.github.io/json-files/rain.mp3"`）時，`new Audio()` 會立即載入這個音檔，並準備好進行播放操作。

3. **直接使用音頻 API**：這個音頻實例會繼承自 `HTMLAudioElement`，所以它可以直接使用所有的音頻相關方法與屬性，如 `play()`、`pause()`、`currentTime` 等。

### 是否可以不使用 `new Audio()`？
不可以完全省略。如果你不想使用 `new Audio()`，你必須在 HTML 中定義一個 `<audio>` 元素，然後通過 JavaScript 操作這個已存在的音頻元素。兩者的區別在於：

- **使用 `new Audio()`**：程式會動態創建音頻物件，無需在 HTML 中添加 `<audio>` 元素，適合需要程式化操作音頻的情境。
- **使用 `<audio>` 標籤**：你可以手動在 HTML 中添加一個 `<audio>` 元素，然後用 JavaScript 取得這個元素來操作它。

例如，使用 HTML 內嵌的 `<audio>` 方式：
```html
<audio id="myAudio" src="https://spmdl.github.io/json-files/rain.mp3"></audio>
```

用 JavaScript 操作這個元素：
```javascript
const audio = document.getElementById("myAudio");
audio.play();
```
--- 

##  HTMLAudioElement 的原型方法
`HTMLAudioElement` 是基於並繼承自`HTMLMediaElement` 的屬性與方法，因此我們可以使用它來控制音樂播放的各種行為。
在這個案例中`HTMLAudioElement` 代表 `<audio>` 元素，該元素是網頁媒體的一部分，繼承相關的原型方法。

### 方法與屬性解釋：

- **audio.play()**：這個方法會讓音樂開始播放，標準化的播放控制功能。

- **audio.pause()** ：這個方法讓音樂暫停播放，所有媒體元素（包括音樂和影片）的通用功能。

- **audio.currentTime**：設置或讀取音樂的當前播放時間（以秒為單位），適用於所有媒體元素。這使我們能夠精確控制音樂播放的進度，從而實現進度條的功能。

- **audio.duration**：這個屬性返回音樂的總時長（以秒為單位），允許開發者知道音頻的長度，顯示在播放器上或進行播放時間的控制。如果音樂還沒載入完成，則會返回 `NaN`。

- **audio.volume** ：這個屬性設定或讀取音樂的音量，範圍是 0（靜音）到 1（最大音量），這是 HTML5 聲音檔的標準功能之一，讓開發者能動態調整音量。

- **audio.muted**：這個屬性用於靜音功能。當音樂靜音時，音量會被暫時設置為 `0`，這是一種用來處理快速靜音/取消靜音的標準方式。

- **audio.playbackRate**：這個屬性設定或讀取音樂的播放速度。`1` 是正常速度，數字越大代表速度越快，可以調整音樂的播放速度，實現像是加速或減速播放的效果。

- **audio.addEventListener('timeupdate')** ：追蹤音樂播放過程中的時間變化。每當音樂播放進度更新時，觸發此事件。

- **audio.addEventListener('loadedmetadata')** ：內建的事件之一，當音樂的元數據（如總時長）被載入時，會觸發此事件，我們可以在這個時候初始化進度條或其他與時間相關的功能。

- **audio.addEventListener('ended')**：當音樂播放結束時觸發此事件，適合用於自動切換到下一首音樂或重置播放器狀態的需求。
